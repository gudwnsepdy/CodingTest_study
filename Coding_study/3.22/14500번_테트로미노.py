n, m = map(int, input().split())

graph = []
for _ in range(n):
    graph.append(list(map(int, input().split())))

tetromino = [[[0,0],[0,1],[0,2],[0,3]],
             [[0,0],[1,0],[2,0],[3,0]],

             [[0,0],[0,1],[1,0],[1,1]],

             [[0,0],[0,1],[0,2],[1,0]],
             [[0,2],[1,0],[1,1],[1,2]],
             [[0,0],[1,0],[1,1],[1,2]],
             [[0,0],[0,1],[0,2],[1,2]],
             [[0,0],[1,0],[2,0],[2,1]],
             [[0,1],[1,1],[2,0],[2,1]],
             [[0,0],[0,1],[1,0],[2,0]],
             [[0,0],[0,1],[1,1],[2,1]],

             [[0,0],[0,1],[0,2],[1,1]],
             [[0,1],[1,0],[1,1],[1,2]],
             [[0,0],[1,0],[2,0],[1,1]],
             [[0,1],[1,0],[1,1],[2,1]],

             [[0,1],[1,0],[1,1],[2,0]],
             [[0,0],[1,0],[1,1],[2,1]],
             [[0,1],[0,2],[1,0],[1,1]],
             [[0,0],[0,1],[1,1],[1,2]]
       ]


max_value = 0

for x in range(n):
    for y in range(m):
        for each in tetromino:
            sum_area = 0
            for sell in each:
                nx = x + sell[0]
                ny = y + sell[1]
                if nx < 0 or ny < 0 or nx >= n or ny >= m:
                    continue
                else:
                    sum_area += graph[nx][ny]
            max_value = max(max_value, sum_area)


print(max_value)